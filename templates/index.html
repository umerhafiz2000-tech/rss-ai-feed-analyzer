<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Cyber RSS Feeds</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css">
  <style>
    body { background-color: #121212; color: #eee; }
    .card { border-radius: 16px; background: #1e1e1e; box-shadow: 0 4px 10px rgba(0,0,0,.5); }
    .navbar { background: linear-gradient(45deg, #2196F3, #21CBF3); }
    table { color: #eee; }
    a { color: #4db8ff; text-decoration: none; }
    a:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <nav class="navbar navbar-dark mb-4">
    <div class="container-fluid">
      <span class="navbar-brand mb-0 h1">âš¡ Cyber Security RSS Feeds</span>
    </div>
  </nav>

  <div class="container">
    <div class="card p-3">
      <table id="feedsTable" class="table table-striped table-hover" style="width:100%">
        <thead>
          <tr>
            <th>Title</th>
            <th>Author</th>
            <th>Date</th>
            <th>Link</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

  <!-- JS -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>

  <script>
    let table;

    function loadFeeds() {
      $.getJSON("/api/feeds", function(data) {
        if (table) {
          table.clear();
          data.forEach(feed => {
            table.row.add([
              feed.title,
              feed.author || "Unknown",
              feed.pubDate || "",
              `<a href="${feed.link}" target="_blank">ðŸ”— Visit</a>`
            ]);
          });
          table.draw(false);
        }
      });
    }

    $(document).ready(function() {
      table = $('#feedsTable').DataTable({
        paging: true,
        searching: true,
        info: true,
        ordering: true,
        pageLength: 10
      });

      loadFeeds();
      setInterval(loadFeeds, 60000); // refresh every 60s
    });
  </script>
</body>
</html>
